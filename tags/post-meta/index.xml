<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Mediavine Trellis – post meta</title><link>https://vcmediavine.github.io/docsytrellis/tags/post-meta/</link><description>Recent content in post meta on Mediavine Trellis</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://vcmediavine.github.io/docsytrellis/tags/post-meta/index.xml" rel="self" type="application/rss+xml"/><item><title>Advanced-Topics: Post Meta Output</title><link>https://vcmediavine.github.io/docsytrellis/advanced-topics/post-meta-output/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://vcmediavine.github.io/docsytrellis/advanced-topics/post-meta-output/</guid><description>
&lt;p>Publishers can configure Post Meta in Trellis Settings, selecting what information appears on a post. Available meta information includes: Author, Breadcrumbs (if the Yoast SEO plugin is active), Categories, Comment Count, and Date (Published, Modified, or both).&lt;/p>
&lt;div class="alert alert-primary" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Trellis templates provided by Mediavine limit Comment Count to the top of a post. If you’d like to add the Comment Count to the bottom of a post, refer to the code in the Additional Information section below.
&lt;/div>
&lt;p>The image below shows the default Post Meta information as rendered by the Trellis Core theme with Yoast SEO installed.&lt;/p>
&lt;img src="article-top.png" alt="Post Meta article top." width="600px"/>
&lt;img src="article-bottom-v3.png" alt="Post Meta article bottom." width="600px"/>
&lt;h2 id="settings">Settings&lt;/h2>
&lt;p>Publishers can control the Post Meta information and where it gets displayed in Trellis Settings. These values are then accessed by various filters and functions. Template parts contain logic to render the information.&lt;/p>
&lt;img src="settings-post-meta_v2.png" alt="Post Meta options in Trellis Settings." width="600px"/>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Setting Name&lt;/th>
&lt;th>Description&lt;/th>
&lt;th>Usage&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Post Meta Display - Top&lt;/td>
&lt;td>Select which post meta to display in the post header. Options include: Comment Count, Author, Date, and Categories.&lt;br />&lt;br />If Yoast SEO is installed, you can show Yoast breadcrumbs.&lt;/td>
&lt;td>Refer to the article-meta-header template part in Trellis Core to see how this is implemented.&lt;br />&lt;br />Location: mediavine-trellis/template-parts/article/article-meta-header.php&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Post Meta Display - Bottom&lt;/td>
&lt;td>Select which post meta to display in the post footer. Options include: Author, Date, and Categories.&lt;br />&lt;br />If Yoast SEO is installed, you can show Yoast breadcrumbs.&lt;/td>
&lt;td>Refer to the article-meta-footer template part in Trellis Core to see how this is implemented.&lt;br />&lt;br />Location: mediavine-trellis/template-parts/article/article-meta-footer.php&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Post Meta Date Display&lt;/td>
&lt;td>Select the date to display in the post header. Options include: Display Modified, Display Published, or Display Both.&lt;/td>
&lt;td>Created by the &lt;code>mv_trellis_entry_date()&lt;/code> function. See &lt;a href="https://vcmediavine.github.io/docsytrellis/reference/functions/">Functions&lt;/a> for more information. You can also refer to the article-meta-header or article-meta-footer template parts in Trellis Core for reference.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="functions">Functions&lt;/h2>
&lt;p>The configuration in Trellis Settings can be accessed via the &lt;code>mv_trellis_is_meta_item_enabled()&lt;/code> function. Individual options are queried by their slug to determine if the publisher has them set. Available Post Meta slugs include:&lt;/p>
&lt;ul>
&lt;li>author&lt;/li>
&lt;li>breadcrumbs (only available if Yoast SEO is installed)&lt;/li>
&lt;li>categories&lt;/li>
&lt;li>comment_count&lt;/li>
&lt;li>date&lt;/li>
&lt;/ul>
&lt;p>The function also specifies a location, which can be:&lt;/p>
&lt;ul>
&lt;li>post_meta_top&lt;/li>
&lt;li>post_meta_bottom&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example&lt;/strong>&lt;/p>
&lt;p>In the following example, the &lt;code>$display_author&lt;/code> variable will be set to &lt;code>true&lt;/code> or &lt;code>false&lt;/code> depending on (1) if the post type supports an author, and (2) if the Trellis Post Meta Author setting is enabled and set to the top of the post.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-php" data-lang="php">&lt;span style="color:#111">$display_author&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">(&lt;/span> &lt;span style="color:#75af00">post_type_supports&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#75af00">get_post_type&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#111">$post_id&lt;/span> &lt;span style="color:#111">),&lt;/span> &lt;span style="color:#d88200">&amp;#39;author&amp;#39;&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#75af00">mv_trellis_is_meta_item_enabled&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#d88200">&amp;#39;author&amp;#39;&lt;/span>&lt;span style="color:#111">,&lt;/span> &lt;span style="color:#d88200">&amp;#39;post_meta_top&amp;#39;&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#111">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If a Post Meta item is available, other functions are used to output its value.&lt;/p>
&lt;ul>
&lt;li>author: &lt;code>mv_trellis_entry_author()&lt;/code>&lt;/li>
&lt;li>date: &lt;code>mv_trellis_entry_date()&lt;/code>&lt;/li>
&lt;li>comment_count: Calculated in the article_meta_header template&lt;/li>
&lt;li>categories: &lt;code>mv_trellis_entry_taxonomies&lt;/code>&lt;/li>
&lt;li>breadcrumbs: Assembled from an internal class and posted to the hook specified by the &lt;code>mv_trellis_top_breadcrumbs_placement&lt;/code> filter.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Example&lt;/strong>&lt;/p>
&lt;p>The following example shows how the post’s Author meta information is output in article-meta-header.php.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-php+HTML" data-lang="php+HTML">if ( $display_author ) {
?&amp;gt;
&amp;lt;p class=&amp;quot;author-meta post-author meta-wrapper&amp;quot;&amp;gt;
&amp;lt;?php
echo esc_html__( 'By: ', 'mediavine' );
mv_trellis_entry_author();
?&amp;gt;
&amp;lt;/p&amp;gt;
&amp;lt;?php
}
&lt;/code>&lt;/pre>&lt;h2 id="useful-filters">Useful Filters&lt;/h2>
&lt;p>One filter is available to adjust breadcrumb placement if Yoast SEO is installed:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://vcmediavine.github.io/docsytrellis/reference/filters/filters-detail/#mv_trellis_top_breadcrumbs_placement">mv_trellis_top_breadcrumbs_placement&lt;/a>: Filters the action hook called for the breadcrumb output near the top of pages. The default is &lt;code>tha_aside_before_entry_content&lt;/code>, which is output by &lt;code>mvt_entry_before()&lt;/code> in the Trellis Core templates. See &lt;a href="https://vcmediavine.github.io/docsytrellis/reference/hooks/">Hooks&lt;/a> in the Reference section for a list of all available hooks.&lt;/li>
&lt;/ul>
&lt;h2 id="additional-information">Additional Information&lt;/h2>
&lt;p>To best understand how Post Meta information is displayed, refer to the article-meta-header.php and article-meta-footer.php template parts in Trellis Core.&lt;/p>
&lt;h3 id="moving-the-comment-count">Moving the Comment Count&lt;/h3>
&lt;p>If you’d like to display the Comment Count at the bottom of a post, you’ll need to add code to your child theme’s functions.php file as well as modifying the article-meta-footer.php template part.&lt;/p>
&lt;p>&lt;strong>Functions.php&lt;/strong>&lt;/p>
&lt;p>This code will add the Comment Count as an option to Post Meta in Trellis Settings:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-php" data-lang="php">&lt;span style="color:#d88200">/**
&lt;/span>&lt;span style="color:#d88200"> * Allows the Comment Count to be used at the bottom of Post Meta.
&lt;/span>&lt;span style="color:#d88200"> */&lt;/span>
&lt;span style="color:#75af00">add_filter&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#d88200">&amp;#39;mv_trellis_before_update_post_meta_bottom&amp;#39;&lt;/span>&lt;span style="color:#111">,&lt;/span> &lt;span style="color:#d88200">&amp;#39;mv_add_comments_option_to_post_meta_bottom&amp;#39;&lt;/span> &lt;span style="color:#111">);&lt;/span>
&lt;span style="color:#00a8c8">function&lt;/span> &lt;span style="color:#75af00">mv_add_comments_option_to_post_meta_bottom&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#00a8c8">array&lt;/span> &lt;span style="color:#111">$setting&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#111">{&lt;/span>
&lt;span style="color:#111">$setting&lt;/span>&lt;span style="color:#111">[&lt;/span>&lt;span style="color:#d88200">&amp;#39;data&amp;#39;&lt;/span>&lt;span style="color:#111">][&lt;/span>&lt;span style="color:#d88200">&amp;#39;options&amp;#39;&lt;/span>&lt;span style="color:#111">][&lt;/span>&lt;span style="color:#d88200">&amp;#39;comment_count&amp;#39;&lt;/span>&lt;span style="color:#111">]&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#d88200">&amp;#39;Comment Count&amp;#39;&lt;/span>&lt;span style="color:#111">;&lt;/span>
&lt;span style="color:#00a8c8">return&lt;/span> &lt;span style="color:#111">$setting&lt;/span>&lt;span style="color:#111">;&lt;/span>
&lt;span style="color:#111">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Article-meta-footer.php&lt;/strong>&lt;/p>
&lt;p>You’ll need to add three pieces of code in the article-meta-footer.php template part.&lt;/p>
&lt;ol>
&lt;li>Check if the Comment Count has been enabled for the footer:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-php" data-lang="php">&lt;span style="color:#75715e">// Check if the Comment Count is set for the bottom of Post Meta
&lt;/span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#111">$mv_trellis_display_comment_count&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#111">(&lt;/span> &lt;span style="color:#111">(&lt;/span> &lt;span style="color:#75af00">comments_open&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#111">$mv_trellis_post_id&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#f92672">||&lt;/span> &lt;span style="color:#75af00">get_comments_number&lt;/span>&lt;span style="color:#111">()&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span> &lt;span style="color:#75af00">post_password_required&lt;/span>&lt;span style="color:#111">()&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#75af00">mv_trellis_is_meta_item_enabled&lt;/span>&lt;span style="color:#111">(&lt;/span> &lt;span style="color:#d88200">&amp;#39;comment_count&amp;#39;&lt;/span>&lt;span style="color:#111">,&lt;/span> &lt;span style="color:#d88200">&amp;#39;post_meta_bottom&amp;#39;&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#111">);&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>Modify the post’s check for meta output to include the Comment Count:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-php" data-lang="php">&lt;span style="color:#75715e">// If we don&amp;#39;t have any meta output, get out
&lt;/span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#00a8c8">if&lt;/span> &lt;span style="color:#111">(&lt;/span> &lt;span style="color:#f92672">!&lt;/span> &lt;span style="color:#111">$mv_trellis_display_author&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span> &lt;span style="color:#111">$mv_trellis_display_date&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span> &lt;span style="color:#111">$mv_trellis_display_comment_count&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span> &lt;span style="color:#111">$mv_trellis_display_categories&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#f92672">!&lt;/span> &lt;span style="color:#111">$mv_trellis_display_breadcrumbs&lt;/span> &lt;span style="color:#111">)&lt;/span> &lt;span style="color:#111">{&lt;/span>
&lt;span style="color:#00a8c8">return&lt;/span>&lt;span style="color:#111">;&lt;/span>
&lt;span style="color:#111">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>Add code to render the Comment Count:&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code class="language-php+HTML" data-lang="php+HTML">// Comments.
if ( $display_comment_count ) {
?&amp;gt;
&amp;lt;div id=&amp;quot;comment-count&amp;quot; class=&amp;quot;meta-element meta-wrapper&amp;quot;&amp;gt;
&amp;lt;div&amp;gt;
&amp;lt;?php mv_trellis_get_template_part( 'template-parts/svg/comment-bubble' ); ?&amp;gt;
&amp;lt;?php
/* translators: %s: number of comments for the post */
echo esc_html( sprintf( _n( '%s Comment', '%s Comments', get_comments_number(), 'mediavine' ), number_format_i18n( get_comments_number() ) ) );
?&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;?php
}
&lt;/code>&lt;/pre></description></item></channel></rss>